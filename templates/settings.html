{% extends "layout.html" %} {% block content %}
<h2>Email Settings</h2>
<hr />

{% if success %}
<div class="alert alert-success" role="alert">{{ success }}</div>
{% elif error %}
<div class="alert alert-danger" role="alert">{{ error }}</div>
{% endif %}

<form method="post" action="{{ url_for('settings') }}">
  <div class="form-group">
    <label for="sender_email">Sender Email</label>
    <input
      type="email"
      class="form-control"
      id="sender_email"
      name="sender_email"
      value="{{ sender_email }}" />
  </div>

  <div class="form-group">
    <label for="sender_password">Sender Password</label>
    <input
      type="password"
      class="form-control"
      id="sender_password"
      name="sender_password"
      value="{{ sender_password }}" />
  </div>

  <div class="form-group">
    <label for="recipient_email">Recipient Email</label>
    <input
      type="email"
      class="form-control"
      id="recipient_email"
      name="recipient_email"
      value="{{ recipient_email }}" />
  </div>

  <div class="form-group">
    <label for="scheduled_time">Schedule Time (24h format, e.g. 14:30)</label>
    <input
      type="time"
      class="form-control"
      id="scheduled_time"
      name="scheduled_time"
      pattern="[0-9]{2}:[0-9]{2}"
      title="Please enter a valid time in 24-hour format (e.g. 14:30)"
      value="{{ scheduled_time }}" />
  </div>

  <button type="submit" class="btn btn-primary">Save</button>
</form>

<hr />

{% if message %}
<div class="alert alert-success" role="alert">{{ message }}</div>
{% endif %}

<form method="post" action="{{ url_for('test_email') }}">
  <button type="submit" class="btn btn-secondary">Send test email</button>
</form>
{% endblock %}
