{% extends "layout.html" %} {% block content %}

<div class="d-flex justify-content-center">
  <div class="card mt-5 col-md-5">
    <div class="card-body">
      <h5>Email Settings</h5>
      <div class="mb-3">
        <form method="post" action="{{ url_for('settings') }}">
          <div class="form-group">
            <label class="form-label" for="sender_email">Sender Email</label>
            <input
              type="email"
              class="form-control text-bg-light mb-3"
              id="sender_email"
              name="sender_email"
              value="{{ sender_email }}" />
          </div>

          <div class="form-group">
            <label class="form-label" for="sender_password"
              >Sender Password</label
            >
            <input
              type="password"
              class="form-control text-bg-light mb-3"
              id="sender_password"
              name="sender_password"
              value="{{ sender_password }}" />
          </div>

          <div class="form-group">
            <label class="form-label" for="recipient_email"
              >Recipient Email</label
            >
            <input
              type="email"
              class="form-control text-bg-light mb-3"
              id="recipient_email"
              name="recipient_email"
              value="{{ recipient_email }}" />
          </div>

          <div class="form-group">
            <label class="form-label" for="scheduled_time"
              >Schedule Time (24h format, e.g. 14:30)</label
            >
            <input
              type="time"
              class="form-control text-bg-light mb-3"
              id="scheduled_time"
              name="scheduled_time"
              pattern="[0-9]{2}:[0-9]{2}"
              title="Please enter a valid time in 24-hour format (e.g. 14:30)"
              value="{{ scheduled_time }}" />
          </div>

          <button type="submit" class="btn btn-primary mt-3">
            Save <i class="bi bi-arrow-right"></i>
          </button>
        </form>
      </div>

      <hr />
      <p>Check if the details above are working by sending a test email.</p>
      {% if message %}
      <div class="alert alert-success" role="alert">{{ message }}</div>
      {% endif %}

      <form method="post" action="{{ url_for('test_email') }}">
        <button type="submit" class="btn btn-success">
          <i class="bi bi-send"></i> Send test email
        </button>
      </form>
      {% if success %}
      <div class="alert alert-success mt-3" role="alert">{{ success }}</div>
      {% elif error %}
      <div class="alert alert-danger mt-3" role="alert">{{ error }}</div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
